"use strict";(self["webpackChunkinvuedious"]=self["webpackChunkinvuedious"]||[]).push([[464],{4794:function(t,a,e){e.d(a,{Z:function(){return _}});var i=e(6252);const n={class:"columns"};function r(t,a,e,r,o,s){const d=(0,i.up)("roundedCard");return(0,i.wg)(),(0,i.iD)("div",n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.dataArray,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.authorId,class:"column col-xs-12 col-sm-6 col-md-3 col-2"},[(0,i.Wm)(d,{channelData:t,mode:e.mode},null,8,["channelData","mode"])])))),128))])}var o=e(3577);const s=t=>((0,i.dD)("data-v-0f6f3684"),t=t(),(0,i.Cn)(),t),d={class:"card"},l={class:"card-image"},c=["src","alt"],h={class:"card-header"},u={class:"card-title h6"},m={class:"card-subtitle text-gray"},p={key:0,class:"card-body"},v=s((()=>(0,i._)("br",null,null,-1)));function g(t,a,e,n,r,s){const g=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",d,[(0,i.Wm)(g,{to:{name:"channel",path:"/channel/:id",params:{id:e.channelData.authorId},props:!0}},{default:(0,i.w5)((()=>[(0,i._)("div",l,[(0,i._)("img",{src:e.channelData.authorThumbnails[2].url,class:"img-responsive",alt:e.channelData.author},null,8,c)])])),_:1},8,["to"]),(0,i._)("div",h,[(0,i.Wm)(g,{to:{name:"channel",path:"/channel/:id",params:{id:e.channelData.authorId},props:!0}},{default:(0,i.w5)((()=>[(0,i._)("div",u,(0,o.zw)(e.channelData.author),1)])),_:1},8,["to"]),(0,i._)("div",m,(0,o.zw)(e.channelData.description),1)]),"channelInfo"!=e.mode?((0,i.wg)(),(0,i.iD)("div",p,[(0,i.Uk)(" Subscribers: "+(0,o.zw)(e.channelData.formattedSubs)+" ",1),v,(0,i.Uk)(" Videos: "+(0,o.zw)(e.channelData.videoCount),1)])):(0,i.kq)("",!0)])}var y={name:"roundedCard",props:{channelData:Object,mode:String}},f=e(3744);const b=(0,f.Z)(y,[["render",g],["__scopeId","data-v-0f6f3684"]]);var w=b,D={name:"roundedCardContainer",props:{dataArray:Array,mode:String},components:{roundedCard:w}};const k=(0,f.Z)(D,[["render",r]]);var _=k},1498:function(t,a,e){e.r(a),e.d(a,{default:function(){return L}});var i=e(6252);const n={class:"tab tab-block"},r={class:"tab-item",id:"tab1"},o={class:"tab-item",id:"tab2"},s={class:"container2"},d={key:0,class:"loading loading-lg"},l={key:1},c={key:0},h={class:"empty"},u={class:"empty-icon"},m=(0,i._)("p",{class:"empty-title h5"},"Connection error",-1),p=(0,i._)("p",{class:"empty-subtitle"},[(0,i.Uk)(" The request to the indvidious instance took too long. "),(0,i._)("br"),(0,i.Uk)("Check your connection and try again. ")],-1),v={class:"empty-action"},g={key:1},y={key:0},f={class:"empty"},b={class:"empty-icon"},w=(0,i._)("p",{class:"empty-title h5"},"No results found",-1),D={key:1},k={key:2,class:"loading loading-lg"};function _(t,a,e,_,C,A){const V=(0,i.up)("unicon"),I=(0,i.up)("router-link"),q=(0,i.up)("cardContainer"),S=(0,i.up)("roundedCardContainer");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("ul",n,[(0,i._)("li",r,[(0,i.Wm)(I,{to:{name:"searchVideo",params:{q:C.query}}},{default:(0,i.w5)((()=>[(0,i.Wm)(V,{name:"video",fill:"var(--primary)"}),(0,i.Uk)("VIDEOS ")])),_:1},8,["to"])]),(0,i._)("li",o,[(0,i.Wm)(I,{to:{name:"searchChannel",params:{q:C.query}}},{default:(0,i.w5)((()=>[(0,i.Wm)(V,{name:"tv-retro",fill:"var(--primary)"}),(0,i.Uk)("CHANNELS ")])),_:1},8,["to"])])]),(0,i._)("div",s,[C.loading?((0,i.wg)(),(0,i.iD)("div",d)):((0,i.wg)(),(0,i.iD)("div",l,[C.failed?((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("div",h,[(0,i._)("div",u,[(0,i.Wm)(V,{name:"sad-dizzy",fill:"var(--primary)",width:"50px",height:"50px"})]),m,p,(0,i._)("div",v,[(0,i._)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=t=>A.reconnect())}," RETRY ")])])])):((0,i.wg)(),(0,i.iD)("div",g,[0==C.dataArray.length?((0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("div",f,[(0,i._)("div",b,[(0,i.Wm)(V,{name:"frown",fill:"var(--primary)",width:"50px",height:"50px"})]),w])])):((0,i.wg)(),(0,i.iD)("div",D,["searchVideo"==C.mode?((0,i.wg)(),(0,i.j4)(q,{key:0,videoArray:C.dataArray},null,8,["videoArray"])):((0,i.wg)(),(0,i.j4)(S,{key:1,dataArray:C.dataArray},null,8,["dataArray"])),C.stop?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",k))]))]))]))])])}var C=e(866),A=e(4794),V=e(9669),I=e.n(V),q=e(2077),S={name:"searchPage",components:{cardContainer:C.Z,roundedCardContainer:A.Z},props:{reload:Boolean},data(){return{dataArray:[],loading:!0,query:this.$route.params.q,mode:this.$route.name,page:1,bottom:!1,failed:!1,stop:!1}},mounted(){this.checkActive()},created(){document.title=this.query+" - Invuedious","searchVideo"==this.mode?this.getVideoData():this.getChannelsData(),window.addEventListener("scroll",(()=>{this.bottom=this.bottomVisible()}))},unmounted(){window.removeEventListener("scroll",(()=>{this.bottom=this.bottomVisible()}))},methods:{checkActive(){"searchVideo"==this.$route.name?(document.getElementById("tab1").classList.add("active"),document.getElementById("tab2").classList.remove("active")):(document.getElementById("tab2").classList.add("active"),document.getElementById("tab1").classList.remove("active"))},reconnect(){this.loading=!0,this.failed=!1,this.getVideoData()},bottomVisible(){const t=window.scrollY,a=document.documentElement.clientHeight,e=document.documentElement.scrollHeight-400,i=a+t>=e;return i||e<a},getVideoData(){var t=this.$store.state.selected+"/api/v1/search?q="+this.query+"&page="+this.page;I()({url:t,timeout:1e4}).then((t=>{if(!this.stop){let e={},i=!1;for(let n=0;n<t.data.length;n++){if(e=t.data[n],e.formattedViews=q(t.data[n].viewCount).format("0a"),"m"==e.formattedViews.charAt(e.formattedViews.length-1)){var a=e.formattedViews.substr(0,e.formattedViews.length-1)+"M";e.formattedViews=a}e.formattedViews+=" views",i=this.checkDouble(t.data[n].videoId,"video"),0==i&&this.dataArray.push(e)}t.data.length<20&&(this.stop=!0)}})).catch((()=>{this.failed=!0})).then((()=>this.page+=1)).then((()=>this.loading=!1))},getChannelsData(){var t=this.$store.state.selected+"/api/v1/search?q="+this.query+"&type=channel&page="+this.page;I()({url:t,timeout:1e4}).then((t=>{if(!this.stop){let e={},i=!1;for(let n=0;n<t.data.length;n++){if(e=t.data[n],e.formattedSubs=q(t.data[n].subCount).format("0a"),"m"==e.formattedSubs.charAt(e.formattedSubs.length-1)){var a=e.formattedSubs.substr(0,e.formattedSubs.length-1)+"M";e.formattedSubs=a}i=this.checkDouble(t.data[n].authorId,"channel"),0==i&&this.dataArray.push(e)}t.data.length<20&&(this.stop=!0)}})).catch((()=>{this.failed=!0})).then((()=>this.page+=1)).then((()=>this.loading=!1))},checkDouble(t,a){for(var e=!1,i=0;i<this.dataArray.length;i++)null!=this.dataArray&&void 0!=this.dataArray[i]&&("video"==a?this.dataArray[i].videoId==t&&(e=!0):this.dataArray[i].authorId==t&&(e=!0));return e}},watch:{reload(){this.reload&&(this.loading=!0,this.dataArray=[],this.page=1,this.bottom=!1,this.failed=!1,this.stop=!1,this.reconnect())},bottom(t){t&&!this.loading&&("searchVideo"==this.mode?this.getVideoData():this.getChannelsData())}}},E=e(3744);const W=(0,E.Z)(S,[["render",_]]);var L=W}}]);
//# sourceMappingURL=search.db539749.js.map